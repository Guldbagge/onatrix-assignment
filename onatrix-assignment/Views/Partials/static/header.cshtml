@using Umbraco.Cms.Web.Common.PublishedModels;
@inherits Umbraco.Cms.Web.Common.Views.UmbracoViewPage
@inject Umbraco.Cms.Web.Common.UmbracoHelper UmbracoHelper

@using Umbraco.Cms.Core
@using Umbraco.Cms.Core.Models.PublishedContent
@using Umbraco.Cms.Core.Routing
@using Umbraco.Extensions
@inject IPublishedValueFallback PublishedValueFallback
@inject IPublishedUrlProvider PublishedUrlProvider

@{
    var rootContents = UmbracoHelper.ContentAtRoot();
    var settings = rootContents?.FirstOrDefault(x => x.ContentType.Alias == "settingsPage") ?? null;

    var officeLocation = settings?.Value<string>("officeLocation") ?? "";
    var headerXLink = settings?.Value<string>("headerXLink") ?? "";
    var headerFacebookLink = settings?.Value<string>("headerFacebookLink") ?? "";
    var headerInstagramLink = settings?.Value<string>("headerInstagramLink") ?? "";
    var headerLink1 = settings?.Value<string>("headerLink1") ?? "";
    var headerLinkText1 = settings?.Value<string>("headerLinkText1") ?? "";
    var headerLink2 = settings?.Value<string>("headerLink2") ?? "";
    var headerLinkText2 = settings?.Value<string>("headerLinkText2") ?? "";
    var headerLink3 = settings?.Value<string>("headerLink3") ?? "";
    var headerLinkText3 = settings?.Value<string>("headerLinkText3") ?? "";
    var headerLink4 = settings?.Value<string>("headerLink4") ?? "";
    var headerLinkText4 = settings?.Value<string>("headerLinkText4") ?? "";

    var siteLogo = settings?.Value<IPublishedContent>("siteLogo")?.Url() ?? "";
    
    
    var currentPageUrl = Model.Url().TrimEnd('/');
    var headerLink1Trimmed = headerLink1.TrimEnd('/');
    var headerLink2Trimmed = headerLink2.TrimEnd('/');
    var headerLink3Trimmed = headerLink3.TrimEnd('/');
    var headerLink4Trimmed = headerLink4.TrimEnd('/');

     var selection = Model.Root().Children.Where(x => x.IsVisible(PublishedValueFallback)).ToArray();

}

<header id="header">
    <div class="background-primary">
        <div class="container">
            <div class="text">
                <p>@officeLocation</p>
            </div>
            <div class="social-links">
                <a href="/">
                    <i class="fa-solid fa-house"></i>
                </a>
                <a href="@headerXLink">
                    <i class="fa-brands fa-x-twitter"></i>
                </a>
                <a href="@headerFacebookLink">
                    <i class="fab fa-facebook"></i>
                </a>
                <a href="@headerInstagramLink">
                    <i class="fab fa-instagram"></i>
                </a>
            </div>
            
      
        </div>
    </div>

    <div class="background-light">
        <div class="container">
            <div class="logo">
                <a href="/"><img src="@siteLogo" alt="Logo Image"></a>
            </div>
            <div class="links">
                @if (selection?.Length > 0)
                {
                    @foreach (var item in selection)
                    {
                        <a class="@(item.IsAncestorOrSelf(Model) ? "nav-link active" : "nav-link")" href="@item.Url(PublishedUrlProvider)">@item.Name</a>
                    }
                }
            </div>
            <div class="search-icon">
                <a href="#"><i class="fas fa-search"></i></a>
            </div>
        </div>
    </div>
</header>

<div class="search-overlay">
    <div class="search-box">
        <button class="close-search">&times;</button>
        <form method="get" action="/search">
            <input type="text" name="query" placeholder="Sök här..." required>
            <button type="submit">Sök</button>
        </form>
    </div>
</div>

<style>
    .search-overlay {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.8);
        z-index: 1000;
        justify-content: center;
        align-items: center;
    }

        .search-overlay.active {
            display: flex;
        }

    .search-box {
        background-color: white;
        padding: 20px;
        border-radius: 5px;
        max-width: 500px;
        width: 100%;
    }

    .close-search {
        position: absolute;
        top: 10px;
        right: 10px;
        background: none;
        border: none;
        font-size: 30px;
        color: white;
    }
</style>